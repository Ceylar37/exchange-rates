{"version":3,"sources":["api.ts","store/reducers/currency.ts","utils/useTypedSelector.ts","Components/CurrencyForm/CurrencyForm.tsx","Components/CurrentCurrency/CurrentCurrency.tsx","App.tsx","store/index.ts","index.tsx"],"names":["ACCESS_KEY","API","$","ajax","url","method","success","data","Error","currencySlice","createSlice","name","initialState","currencies","selectedCurrency","country","symbol","rate","reducers","setCurrencies","state","action","payload","setSelectedCurrency","currency","find","currencyReducer","reducer","currencyActions","actions","requestCurrenciesAndPull","createAsyncThunk","arg","thunkAPI","a","symbols","rates","countries","Object","keys","map","key","dispatch","useTypedSelector","useSelector","Option","Select","CurrencyForm","useDispatch","justify","showSearch","style","width","placeholder","optionFilterProp","onChange","value","filterOption","input","option","children","toLowerCase","indexOf","e","src","CurrentCurrency","App","useEffect","length","size","store","configureStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3ba73610.chunk.js","sourcesContent":["import $ from 'jquery'\r\n\r\nconst ACCESS_KEY = '27b6fd44b20851862a460b1af37d2601'\r\n\r\ninterface IRatesResponse {\r\n    'success': boolean,\r\n    'timestamp': number,\r\n    'base': string,\r\n    'date': string,\r\n    'rates': {\r\n        [key: string]: number\r\n    }\r\n}\r\n\r\ninterface ISymbolsResponse {\r\n    'success': boolean,\r\n    'symbols': {\r\n        [key: string]: string\r\n    }\r\n}\r\n\r\ninterface ICountriesResponse {\r\n    [key: string]: string\r\n}\r\n\r\nexport const API = {\r\n    getSymbols() {\r\n        return $.ajax({\r\n            url: 'http://data.fixer.io/api/symbols?access_key=' + ACCESS_KEY,\r\n            method: 'get',\r\n            success: (data: ISymbolsResponse) => {\r\n                debugger\r\n                if (!data.success) throw new Error('Server Error')\r\n                return data\r\n            }\r\n        })\r\n    },\r\n\r\n    getRates() {\r\n        return $.ajax({\r\n            url: 'http://data.fixer.io/api/latest?access_key=' + ACCESS_KEY + '&format=1',\r\n            method: 'get',\r\n            success: (data: IRatesResponse) => {\r\n                if (!data.success) throw new Error('Server Error')\r\n                return data\r\n            }\r\n        })\r\n    },\r\n\r\n    getCountries() {\r\n        return $.ajax({\r\n            url: 'http://country.io/currency.json',\r\n            method: 'get',\r\n            success: (data: ICountriesResponse) => data\r\n        })\r\n    }\r\n}","import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {AppDispatch, RootState} from \"../index\";\r\nimport {API} from \"../../api\";\r\n\r\nexport interface ICurrency {\r\n    symbol: string,\r\n    rate: number,\r\n    country: string\r\n}\r\n\r\nconst currencySlice = createSlice({\r\n    name: 'currency',\r\n    initialState: {\r\n        currencies: [] as ICurrency[],\r\n        selectedCurrency: {\r\n            country: '',\r\n            symbol: '',\r\n            rate: 0\r\n        } as ICurrency\r\n    },\r\n    reducers: {\r\n        setCurrencies: (state, action: PayloadAction<{currencies: ICurrency[]}>) => {\r\n            state.currencies = action.payload.currencies\r\n        },\r\n        setSelectedCurrency: (state, action: PayloadAction<{country: string}>) => {\r\n            const currency = state.currencies.find(currency => currency.country === action.payload.country)\r\n            if (currency) state.selectedCurrency = currency\r\n        }\r\n    }\r\n})\r\n\r\nexport const currencyReducer = currencySlice.reducer\r\nexport const currencyActions = currencySlice.actions\r\n\r\nexport const requestCurrenciesAndPull = createAsyncThunk<\r\n    Promise<void>,\r\n    void,\r\n    {\r\n        dispatch: AppDispatch,\r\n        state: RootState\r\n    }>('currency/requestCurrenciesAndPull', async (arg, thunkAPI) => {\r\n        const {symbols} = await API.getSymbols()\r\n        const {rates} = await API.getRates()\r\n        const countries = await API.getCountries()\r\n        const currencies: ICurrency[] = Object.keys(countries).map(key => ({rate: rates[countries[key]], symbol: symbols[countries[key]], country: key}))\r\n        thunkAPI.dispatch(currencyActions.setCurrencies({currencies}))\r\n    }\r\n)","import {TypedUseSelectorHook, useSelector} from \"react-redux\";\r\nimport {RootState} from \"../store\";\r\n\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector","import React from 'react'\r\nimport {Col, Row, Select} from \"antd\";\r\nimport {useTypedSelector} from \"../../utils/useTypedSelector\";\r\nimport {currencyActions, ICurrency} from \"../../store/reducers/currency\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {AppDispatch} from \"../../store\";\r\nconst {Option} = Select\r\n\r\ninterface IProps {\r\n    currencies: ICurrency[]\r\n}\r\n\r\nconst CurrencyForm: React.FC<IProps> = ({currencies}) => {\r\n\r\n    const dispatch = useDispatch<AppDispatch>()\r\n\r\n\r\n\r\n    const onChangeHandler = (value: string) => {\r\n        dispatch(currencyActions.setSelectedCurrency({country: value}))\r\n    }\r\n\r\n    return (\r\n        <Row justify={'center'}>\r\n            <Select\r\n                showSearch\r\n                style={{width: 200}}\r\n                placeholder=\"Select a currency\"\r\n                optionFilterProp=\"children\"\r\n                onChange={onChangeHandler}\r\n                filterOption={(input, option) => {\r\n                    try {\r\n                        return option?.children[1].toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                    } catch (e) {\r\n                        return false\r\n                    }\r\n\r\n                }}\r\n            >\r\n                {currencies.map(currency =>\r\n                    <Option key={currency.country} value={currency.country}>\r\n                        <img src={`https://flagcdn.com/16x12/${currency.country.toLowerCase()}.png`}/>\r\n                        {currency.symbol}\r\n                    </Option>)}\r\n            </Select>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default CurrencyForm","import React from 'react'\r\nimport {Col, Row} from \"antd\";\r\nimport {useTypedSelector} from \"../../utils/useTypedSelector\";\r\n\r\nconst CurrentCurrency: React.FC = () => {\r\n\r\n    const selectedCurrency = useTypedSelector(state => state.currency.selectedCurrency)\r\n\r\n    return (\r\n        <>\r\n            {selectedCurrency.country &&\r\n            <Row>\r\n                <Col>\r\n                    <Row>\r\n                        <img src={`https://flagcdn.com/256x192/${selectedCurrency.country.toLowerCase()}.png`}/>\r\n                    </Row>\r\n                    <Row>\r\n                        <strong>{selectedCurrency.symbol}</strong>\r\n                    </Row>\r\n                    <Row>\r\n                        <span>Rate to Euro : {selectedCurrency.rate}</span>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CurrentCurrency","import React, {useEffect} from 'react'\r\nimport 'antd/dist/antd.css'\r\nimport './App.scss'\r\nimport {useDispatch} from \"react-redux\"\r\nimport {AppDispatch} from \"./store\"\r\nimport {requestCurrenciesAndPull} from \"./store/reducers/currency\"\r\nimport {Col, Row, Spin} from \"antd\"\r\nimport {useTypedSelector} from \"./utils/useTypedSelector\";\r\nimport CurrencyForm from \"./Components/CurrencyForm/CurrencyForm\";\r\nimport CurrentCurrency from \"./Components/CurrentCurrency/CurrentCurrency\";\r\n\r\n\r\nconst App: React.FC = () => {\r\n\r\n    const dispatch = useDispatch<AppDispatch>()\r\n    const currencies = useTypedSelector((state => state.currency.currencies))\r\n\r\n    useEffect(() => {\r\n        dispatch(requestCurrenciesAndPull())\r\n    }, [])\r\n\r\n    return (\r\n        <Row justify={'center'}>\r\n            {currencies.length\r\n                ?\r\n                <Col>\r\n                    <CurrencyForm currencies={currencies}/>\r\n                    <CurrentCurrency/>\r\n                </Col>\r\n                :\r\n                <Spin size={\"large\"}/>}\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import {configureStore} from \"@reduxjs/toolkit\";\r\nimport {currencyReducer} from \"./reducers/currency\";\r\n\r\nexport const store = configureStore({\r\n    reducer: {currency: currencyReducer}\r\n})\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {Provider} from \"react-redux\";\r\nimport {store} from \"./store\";\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}